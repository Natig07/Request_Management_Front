<main class="p-10  relative flex justify-center content-center items-center h-screen overflow-hidden">
    <a routerLink="/dashboard/profile" class="flex group gap-2 absolute left-8 top-8 border-0 px-3 py-2 text-[#6045E2] text-sm">
        <i class="bi opacity-70 bi-chevron-left group-hover:opacity-100"></i>
        <span>Geri</span>
    </a>

    <form action="" (ngSubmit)="onSubmit()" [formGroup]="RenewPasswordForm" class=" min-w-[300px] flex w-1/3 flex-col border border-black/25  px-7 py-4 pb-6 rounded-3xl gap-y-3">
        <h2 class="text-center text-[#494294] font-semibold text-pretty mb-2">Şifrənin dəyişdirilməsi</h2>
        <div class="text-sm w-full flex flex-col gap-y-2 relative">
            <label for="curr_pswd" class="relative w-fit">Hazırkı şifrə
                <i class="bi text-[8px] bi-asterisk text-red-600 absolute top-0 -right-2" aria-hidden="true"></i>
            </label>
            <div class="relative">
                <input required class="border text-gray-500 w-full outline-0 focus:outline-1 outline-black/30 border-black/20 rounded-md px-3 py-2 text-sm" id="curr_pswd" [type]="showpasswordCurrent?'text':'password'" 
                formControlName="oldPassword"
                placeholder="Hazırkı şifrəni daxil edin.">
             <button 
                type="button"
                (click)="togglevisibilityCurrent()"
                class="absolute right-2  top-1  text-black/40 text-lg cursor-pointer focus:outline-none"
                
            >
                @if(showpasswordCurrent){
                    <i class="bi bi-eye-slash"></i>
                }@else {
                    <i class="bi bi-eye"></i>
            }
            </button>
            </div>
            
        </div>
        <div class="text-sm flex flex-col gap-y-2">
            <label for="new_pswd" class="relative w-fit ">Yeni şifrə
                <i class="bi text-[8px] bi-asterisk text-red-600 absolute top-0 -right-2" aria-hidden="true"></i>
            </label>
            <div class="relative">
                <input required class="border text-gray-500 outline-0 focus:outline-1 w-full outline-black/30 border-black/20 rounded-md px-3 py-2 text-sm" id="new_pswd" [type]="showpasswordNew?'text':'password'" 
                formControlName="newPassword"
                placeholder="Yeni şifrəni daxil edin.">

                <button 
                type="button"
                (click)="togglevisibilityNew()"
                class="absolute right-2  top-1  text-black/40 text-lg cursor-pointer focus:outline-none"
                
            >
                @if(showpasswordNew){
                    <i class="bi bi-eye-slash"></i>
                }@else {
                    <i class="bi bi-eye"></i>
            }
            </button>
            </div>
            

            <p class="text-gray-500 text-[12px]">Şifrə 8 simvol uzunluğunda olmalı, yalnız rəqəmlərdən ibarət olmamalı və əvvəl istifadə edilmiş şifrə olmamalıdır</p>
        </div>
        <div class="text-sm flex flex-col gap-y-2">
            <label for="rep_new_pswd" class="relative w-fit">Yeni şifrənin təkrarı
                <i class="bi text-[8px] bi-asterisk text-red-600 absolute top-0 -right-2" aria-hidden="true"></i>
            </label>
             <div class="relative">
                <input  required class="border w-full text-gray-500 outline-0 focus:outline-1 outline-black/30 border-black/20 rounded-md px-3 py-2 text-sm" id="rep_new_pswd" [type]="showpasswordNew?'text':'password'" 
                formControlName="repeatNewPassword"
                placeholder="Yeni şifrəni təkrar daxil edin.">

                <button 
                type="button"
                (click)="togglevisibilityNew()"
                class="absolute right-2  top-1  text-black/40 text-lg cursor-pointer focus:outline-none"
                
            >
                @if(showpasswordNew){
                    <i class="bi bi-eye-slash"></i>
                }@else {
                    <i class="bi bi-eye"></i>
            }
            </button>
            </div>
            
        </div>
        <div class="button-group mt-4 flex gap-3 justify-center">
        <button
          type="reset"
          
          class="border-1  cursor-pointer  w-1/2 border-black/20 text-gray-400 py-2 rounded-md"
          >
          Ləğv et
        </button>

        <button
          type="submit"
          
          class="bg-[#6045E2] w-1/2 cursor-pointer  transition duration-300 hover:bg-[#806ce1] text-white py-2 rounded-md"
          >
          @if (!loading) {
            <span>Təsqiqlə</span>
          }
          @if (loading) {
            <div  class="spinner-border spinner-border-sm text-light" role="status"></div>
          } 
          
          
        </button>
      </div>
    </form>

    @if (successMessage) {
        <!-- Backdrop -->
        <div
    
            class="fixed inset-0  bg-black/60 backdrop-opacity-50 flex items-center justify-center z-50"
        >
        <!-- Modal -->
         <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-sm text-center">
            <!-- Icon -->
            <div class="modal-card">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="100"
                    height="100"
                    viewBox="0 0 100 100"
                    fill="none"
                    class="success-icon"
                    aria-hidden="true"
                >
                    <!-- Circle -->
                    <circle
                    class="icon-circle"
                    cx="50"
                    cy="50"
                    r="45"
                    stroke="currentColor"
                    stroke-width="4"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    fill="none"
                    ></circle>

                    <!-- Checkmark -->
                    <path
                    class="icon-check"
                    d="M32 56 L48 67 L70 27"
                    stroke="currentColor"
                    stroke-width="4"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    fill="none"
                    ></path>
                </svg>

            </div>


            <!-- Message -->
             <h2 class=" text-lg font-semibold m-3">
               {{successMessage}}</h2>
            <p class="text-gray-500  text-sm">Şifrəniz uğurla dəyişdirildi. Daxil olmaq üçün yeni şifrənizi istifadə edin.</p>

         </div>
            
        </div>
    }
    

    <!-- Error message -->
     @if (errorMessage) {
       <div
            class="absolute top-4 w-fit left-[2/5] translate-x-1/12 bg-red-500 text-white px-4 py-2 rounded-lg shadow-md transition-opacity duration-500"
            >
            {{ errorMessage }}
        </div>
     }
    
</main>
